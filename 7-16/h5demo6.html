<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>颜色拾取器</title>

</head>
<body>
    <canvas id="myCanvas">
        你的浏览器居然不支持Canvas？！赶快换一个吧！！
    </canvas>
<script src = "jquery-3.1.0.js">
</script>
<script>
  var myCanvas = $("#myCanvas");
  var context = myCanvas.get(0).getContext("2d");
  var img = new Image();
  img.src = "../images/bg1.jpg";

  //  这是正确写法
  img.onload = function(){
    context.drawImage(img,0,0,500,333);

  }
  // $(img).load(function(){     //   这里有个错误,load那里有错误
  //   context.drawImage(image,0,0,500,333);
  // });

  // canvas.click(function(e){
  //   var canvasOffset = canvas.offset();
  //   var canvasX = Math.floor(e.pageX - canvasOffset.left);
  //   var canvasY = Math.floor(e.pageY - canvasOffset.top);
  //   var imageDate = context.getImageData(canvasX,canvasY,1,1);
  //   var pixel = imageData.data;
  //   var pixelColor = "rgba("+pixel[0]+","+pixel[1]+","+pixel[2]+","+pixel[3]+")";
  //   $("body").css("backgroundColor",pixelColor);
  // });
  myCanvas.onclick =function(e){//  不反应但是没有报jQuery的错误
    var canvasOffset = myCanvas.offset();
    var canvasX = Math.floor(e.pageX - canvasOffset.left);
    var canvasY = Math.floor(e.pageY - canvasOffset.top);
    var imageDate = context.getImageData(canvasX,canvasY,1,1);
    var pixel = imageData.data;
    var pixelColor = "rgba("+pixel[0]+","+pixel[1]+","+pixel[2]+","+pixel[3]+")";
    $("body").css("backgroundColor","red");
  }
</script>
</body>

</html>
